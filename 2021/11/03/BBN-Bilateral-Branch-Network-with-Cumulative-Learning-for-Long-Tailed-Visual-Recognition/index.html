

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/bg/site_logo.png">
  <link rel="icon" href="/img/bg/site_logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="这篇论文揭示了在长尾问题中，class re-balancing 策略虽然能有效促进 classifier 学习，但确会损害 feature extractor 的学习，为此提出了新的网络架构 BBN 及其对应的学习策略，用于在充分学习数据特征的同时也能关注到尾部数据。">
  <meta name="author" content="Ruikang Liu">
  <meta name="keywords" content="">
  <meta name="description" content="这篇论文揭示了在长尾问题中，class re-balancing 策略虽然能有效促进 classifier 学习，但确会损害 feature extractor 的学习，为此提出了新的网络架构 BBN 及其对应的学习策略，用于在充分学习数据特征的同时也能关注到尾部数据。">
<meta property="og:type" content="article">
<meta property="og:title" content="BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition">
<meta property="og:url" content="https://ruikangliu.github.io/2021/11/03/BBN-Bilateral-Branch-Network-with-Cumulative-Learning-for-Long-Tailed-Visual-Recognition/index.html">
<meta property="og:site_name" content="Ruikang Liu&#39;s homepage">
<meta property="og:description" content="这篇论文揭示了在长尾问题中，class re-balancing 策略虽然能有效促进 classifier 学习，但确会损害 feature extractor 的学习，为此提出了新的网络架构 BBN 及其对应的学习策略，用于在充分学习数据特征的同时也能关注到尾部数据。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230252.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230305.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230303.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230309.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230312.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230317.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230320.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230324.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230326.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230328.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230329.png">
<meta property="og:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230331.png">
<meta property="article:published_time" content="2021-11-03T14:46:40.000Z">
<meta property="article:modified_time" content="2021-11-04T15:17:09.685Z">
<meta property="article:author" content="Ruikang Liu">
<meta property="article:tag" content="long-tailed problem">
<meta property="article:tag" content="re-sampling">
<meta property="article:tag" content="CVPR 2020">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230252.png">
  
  <title>BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition - Ruikang Liu&#39;s homepage</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"ruikangliu.github.io","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"S79G4wWwynDNkmh5eoEnIOJ9-MdYXbMMI","app_key":"fU0pRxPhr6hK1RqhDTYM9JSH","server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>lianlio</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230309.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-03 22:46" pubdate>
        November 3, 2021 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.5k words
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      14 minutes
    </span>
  

  
  
    
      <!-- LeanCloud 统计文章PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> times
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition</h1>
            
            <div class="markdown-body">
              <p>这篇论文揭示了在长尾问题中，class re-balancing 策略虽然能有效促进 classifier 学习，但确会损害 feature extractor 的学习，为此提出了新的网络架构 BBN 及其对应的学习策略，用于在充分学习数据特征的同时也能关注到尾部数据。<span id="more"></span>值得一提的是，这篇论文得出的结论与 Decoupling Representation and Classifier for Long-Tailed Recognition 一致，而且还做了更为详尽的实验进行证明，这更加说明了这个结论的正确性。</p>
<h1>How class re-balancing strategies work?</h1>
<ul>
<li>Class re-balancing strategies promote classifier learning significantly but might <strong>damage the universal representative ability</strong> of the learned deep features due to distorting original distributions.</li>
</ul>
<hr>
<p><strong>Experiment</strong></p>
<ul>
<li>In order to justify our conjecture, we design a <strong>two-stage experimental fashion</strong> to separately learn representations and classifiers of deep models.
<ul>
<li>Concretely, in the <strong>first stage</strong>, we train a classification network with plain training (i.e., cross-entropy) or re-balancing methods (i.e., re-weighting/re-sampling) as learning manners. Then, we obtain different kinds of feature extractors corresponding to these learning manners.</li>
<li>When it comes to the <strong>second stage</strong>, we fix the parameters of the feature extractors learned in the former stage, and retrain classifiers from scratch with the aforementioned learning manners again.</li>
</ul>
</li>
</ul>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230252.png" srcset="/img/loading.gif" lazyload alt=""></p>
<ul>
<li>By employing <strong>CE</strong> on the representation learning and employing <strong>RS</strong> on the classifier learning, we can achieve the lowest error rate on the validation set of CIFAR-100-IR50. (which <strong>coincides with <a href="https://ruikangliu.github.io/2021/11/02/Decoupling-Representation-and-Classifier-for-Long-Tailed-Recognition/">Decoupling Representation and Classifier for Long-Tailed Recognition</a>!</strong>)</li>
</ul>
<hr>
<p><strong>Affects of re-balancing strategies on the compactness of learned features</strong></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230305.png" srcset="/img/loading.gif" lazyload alt=""></p>
<ul>
<li>论文还进一步证明了 class re-balancing 的确会损害数据特征的学习。从下图可以看到，由 CE 和 RW 学得的类内特征分布更加分散，而直接由 CE 学得的类内特征分布则更加紧凑，这代表其学得的特征更有效</li>
</ul>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230303.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h1>Bilateral-Branch Network (BBN)</h1>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230309.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><strong>Data samplers</strong></p>
<ul>
<li>
<p><strong>Uniform sampler</strong>: each sample in the training dataset is <strong>sampled only once</strong> with equal probability in a training epoch. The uniform sampler retains the characteristics of original distributions, and therefore benefits the representation learning.</p>
</li>
<li>
<p><strong>Reversed sampler</strong>: the sampling possibility of each class is proportional to the reciprocal of its sample size. There are three sub-procedures to construct the reversed sampler:</p>
<ol>
<li>Calculate the sampling possibility $P_i$ for class $i$ according to the number of samples as $$P_i=\frac{w_i}{\sum_{j=1}^Cw_j}$$where $w_i=\frac{N_{max}}{N_i}$</li>
<li>Randomly sample a class according to $P_i$</li>
<li>Uniformly pick up a sample from class $i$ with replacement.</li>
</ol>
</li>
</ul>
<p><strong>Weights sharing</strong></p>
<ul>
<li>Both branches use the same residual network structure and <strong>share all the weights except for the last residual block</strong>.  There are <strong>two benefits</strong> for sharing weights: On the one hand, the well-learned representation by the conventional learning branch can benefit the learning of the re-balancing branch. On the other hand, sharing weights will largely reduce computational complexity in the inference phase.</li>
</ul>
<p><strong>Cumulative learning strategy</strong></p>
<ul>
<li><strong>Cumulative learning strategy</strong> is proposed to shift the learning focus from the universal patterns to the tail data gradually by controlling both the weights for features produced by two branches and the classification loss $\mathcal L$.</li>
</ul>
<p>$$<br>
\begin{aligned}<br>
z&amp;=\alpha W_c^Tf_c+(1-\alpha)W_r^Tf_r\newline<br>
\hat p_i&amp;=\frac{e^{z_i}}{\sum_{j=1}^Ce^{z_j}}\newline<br>
\mathcal L &amp;= αE(\hat p, y_c) + (1 − α)E(\hat p, y_r)<br>
\end{aligned}<br>
$$<br>
where $E(·, ·)$ denotes the cross-entropy loss function, and $\alpha$ will gradually decrease as the training epochs increasing:</p>
<p>$$<br>
\alpha=1-\left(\frac{T}{T_{max}}\right)^2<br>
$$</p>
<ul>
<li>Different from two-stage fine-tuning strategies, <strong>our $α$ ensures that both branches for different goals can be constantly updated in the whole training process, which could avoid the affects on one goal when it performs training for the other goal</strong>.</li>
</ul>
<p><strong>Inference phase</strong></p>
<ul>
<li>Because both branches are equally important, we simply fix $α$ to 0.5 in the test phase.</li>
</ul>
<blockquote>
<p><strong>BBN v.s. ensemble methods</strong></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230312.png" srcset="/img/loading.gif" lazyload alt=""></p>
</blockquote>
<h1>Experiments</h1>
<p><strong>Comparison methods</strong></p>
<ul>
<li><strong>Baseline methods</strong>. We employ plaining training with <strong>cross-entropy loss</strong> and focal loss as our baselines. Note that, we also conduct experiments with <strong>a series of mixup algorithms</strong> for comparisons.</li>
<li><strong>Two-stage fine-tuning strategies</strong>. We train networks with cross-entropy (CE) on imbalanced data in the first stage, and then conduct class re-balancing training in the second stage. “<strong>CE-DRW</strong>” and “<strong>CE-DRS</strong>” refer to the two-stage baselines using re-weighting and re-sampling at the second stage.</li>
<li><strong>State-of-the-art methods</strong>. For state-of-the-art methods, we compare with the recently proposed <strong>LDAM</strong> and <strong>CB-Focal</strong>.</li>
</ul>
<hr>
<p><strong>long-tailed CIFAR-10 and CIFAR-100</strong></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230317.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><strong>iNaturalist</strong></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230320.png" srcset="/img/loading.gif" lazyload alt=""></p>
<hr>
<p><strong>Ablation studies</strong></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230324.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230326.png" srcset="/img/loading.gif" lazyload alt=""></p>
<blockquote>
<p>由下图可以看到，相比其他的 decay 方法，Parabolic decay 在 $\alpha\geq0.5$ 的时间更多，也就是花了更多时间学习全局特征，这也是它表现最好的原因</p>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230328.png" srcset="/img/loading.gif" lazyload alt=""></p>
</blockquote>
<hr>
<p><strong>Validation experiments of our proposals</strong></p>
<ul>
<li>Evaluations of feature quality. 给定一个训练好的 BBN 模型，固定 feature extractor 的参数，然后分别重新训练两个分支的 classifier，最后分别测试两个分支各自的错误率。可以看到，用于学习数据特征的 Conventional learning branch 取得的错误率接近直接用  vanilla CE 得到的错误率，说明它的确成功抽取出了全局的数据特征。同时，得益于参数共享，关注尾部数据的 Re-balancing 分支也能取得比重采样和重加权更好的效果</li>
</ul>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230329.png" srcset="/img/loading.gif" lazyload alt=""></p>
<ul>
<li>Visualization of classifier weights. 下图中，$\sigma$ 表示十个类别权重 $L_2$ 范数的标准差，“BBN-ALL” 表示 $W_c$ 和 $W_r$ 合并后的权重。可以看到，“BBN-ALL” 给各个类别的权重都基本相同，并且标准差是最低的；同时，“BBN-CB” 和 “BBN-RB” 的权重范数分布也的确与它们各自的职责相吻合</li>
</ul>
<p><img src="https://lianlio-homepage.oss-cn-beijing.aliyuncs.com/img/post/2021/11/04/20211104-230331.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h1>References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1910.09217">BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition, CVPR 2020</a></li>
<li>code: <a target="_blank" rel="noopener" href="https://github.com/Megvii-Nanjing/BBN">https://github.com/Megvii-Nanjing/BBN</a></li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/machine-learning/">machine learning</a>
                    
                      <a class="hover-with-bg" href="/categories/machine-learning/long-tailed-problem/">long-tailed problem</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/long-tailed-problem/">long-tailed problem</a>
                    
                      <a class="hover-with-bg" href="/tags/re-sampling/">re-sampling</a>
                    
                      <a class="hover-with-bg" href="/tags/CVPR-2020/">CVPR 2020</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    All articles in this blog adopt the <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 agreement</a>. Please indicate the source for reprinting!
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/11/02/Decoupling-Representation-and-Classifier-for-Long-Tailed-Recognition/">
                        <span class="hidden-mobile">Decoupling Representation and Classifier for Long-Tailed Recognition</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@waline/client@1/dist/Waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://blog-api-cxj3pfnm0-ruikangliu.vercel.app/","path":"window.location.pathname","placeholder":null,"meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"en","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","avatar":"retro","avatarCDN":"https://seccdn.libravatar.org/avatar/","avatarForce":false,"wordLimit":0,"pageSize":10,"highlight":true},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        new Waline(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          Fluid.plugins.initFancyBox('#waline .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            Page view: 
            <span id="leancloud-site-pv"></span>
            
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            Visitor count:
            <span id="leancloud-site-uv"></span>
            
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- KaTeX -->
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css" />
  








  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
